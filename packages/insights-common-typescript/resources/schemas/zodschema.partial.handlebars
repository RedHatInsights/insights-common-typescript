{{!Copied from https://github.com/foxel/openapi3-typescript-codegen/blob/master/templates/typescript/schema.partial.handlebars }}
{{~#if this.[$ref]~}}
  {{#with namespace}}{{this}}.{{/with}}zodSchema{{schemaRefToTypeName this.[$ref]}}()
{{~else~}}
{{~#if allOf~}}
  z.intersection({{#each allOf}}{{> zodschema namespace=../namespace}}{{#unless @last}}, {{/unless}}{{/each}})
{{~else~}}
{{~#if oneOf~}}
  z.union([{{#each oneOf}}{{> zodschema namespace=../namespace}}{{#unless @last}}, {{/unless}}{{/each}}])
{{~else~}}
{{~#if anyOf~}}
  z.union({{#each anyOf}}{{> zodschema namespace=../namespace}}{{#unless @last}}, {{/unless}}{{/each}})
{{~else~}}
{{~#if enum~}}
z.enum([
  {{~#each enum~}}
    {{~#switch ../type}}
        {{~#case "string"}} '{{value this ''}}'{{/case~}}
        {{~else~}}
        {{value this ../type~}}
    {{/switch~}}
    {{#unless @last}}, {{/unless}}
  {{~/each}}
])
{{~else~}}
{{#switch type}}
{{#case "array"}}z.array({{> zodschema items namespace=namespace}}){{/case~}}
{{#case "number"}}z.number(){{/case~}}
{{#case "integer"}}z.number().int(){{/case~}}
{{#case "string"}}z.string(){{/case~}}
{{#case "boolean"}}z.boolean(){{/case~}}
{{#case "null"}}z.null(){{/case~}}
{{#case undefined}}z.unknown(){{/case~}}
{{#case "object"}}
{{~#if properties}}
z.object({
{{~#each properties}}
    {{@key}}: {{> zodschema namespace=../namespace}}{{#unless (in? ../required @key)}}.optional().nullable(){{/unless}},
{{/each~}}
})
{{else}}
z.any()
{{/if}}

{{/case}}
{{else}}
{{/switch}}
{{~/if~}}
{{~/if~}}
{{~/if~}}
{{~/if~}}
{{~/if~}}
